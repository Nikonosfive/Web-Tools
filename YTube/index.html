<!DOCTYPE html>
  <html>
    <head>
      <meta charset="UTF-8">
    </head>
    <body>
      <video id="video" height="600" controls loop></video><br/>
      YTube by TADR<br>
      <div id="box">
        <style>
#box{position:absolute;background-color:#f0f0f0;top:0;left:0;z-index:999999999999999999;box-shadow:4px 4px 3px rgba(0,0,0,0.3);border-radius:3px;}
.btn{border-style:solid;border-width:1px 1px 1px 0;float:left;border-color:#c0c0c0;height:28px;}
path{fill:#555555;}
svg{float:left;width:20px;height:20px;}
.label{display:none;}
.file{background-color:#ee1c1c;width:40px;height:28px;color:white;border-radius:4px;padding:0px 0px 0px 9px;float:left;}
body{user-select: none;}
.btn:hover{box-shadow: 2.3px 2.5px 4px 1.5px rgba(0, 0, 0, 0.2);}
.btn:active{box-shadow: 2px 2px 4px 0px rgba(0, 0, 0, 0.2) inset;}
#spsl{height:28px;width:60.86px;float:left;border-width:0 1px 0 0;font-size:16px;}
.op{border-top-style:solid;border-color:#c0c0c0;border-width:1px;background-color:#e0e0e0;}
        </style>
          <div class="label">
            <input type="button" value="再生" onClick="play()" id="play"/>
            <input type="button" value="停止" onClick="pause()" id="stop"/><br/>
            <input type="file" id="filename" value="ファイル読み込み" class="file"/><br/>
            <input type="button" onClick="changeSpeed(1.0)" id="いち"/>
            <input type="button" onClick="changeSpeed(0.1)" id="てんいち"/>
            <input type="button" onClick="changeSpeed(-0.1)" id="ひくてんいち"/><br/>
            <input type="button" onClick="changeSpeed(-1.0)" id="ひくいち"/><br/>
            <input type="button" value="全画面" onClick="bORg()" id="btn" class="btn" id="全画面"/><br/>
            <input type="button" value="+5" onClick="vtime(+document.getElementById('spsl').value)" id="ご" class="btn"/><br/>
            <input type="button" value="-5" onClick="vtime(-document.getElementById('spsl').value)" id="ひくご" class="btn"/><br/>
            <input type="button" onClick="loop()" id="loop" class="btn"/><br/>
          </div>
        <div style="height:20px;width:100%;background-color:#b0b0b0;border-bottom-style:solid;border-width:1px;border-radius:3px 3px 0 0;" id="a"></div>
        <div>
          <div style="height:28px;">
            <label for="filename"><div class="file">開く</div></label>
            <label for="loop"><div style="float:left;height:28px;width:72px;border-style:none solid;border-width:1px;border-color:#c0c0c0;" id="lp" class="btn">loop:on</div></label>
            <select id="spsl" class="btn"><option>0.01</option><option>0.05</option><option>0.1</option><option>0.5</option><option>1</option><option selected>5</option><option>10</option><option>15</option><option>20</option><option>30</option><option>60</option></select>
          </div>
          <div>
            <div style="float:left;border-top-style:solid;border-width:1px;border-top-color:#c0c0c0;">
              <div style="border-right-style:solid;border-width:1px;border-color:#c0c0c0;">
                <a style="float:left;width:56.68px;height:25px;padding-left:7.5px">Speed</a>
                <div id="sel" style="overflow-x:scroll;width:56.4px;height:25px;border-style:solid;border-width:0 1px;float:left;">
                  <div class="op">0.1</div>
                  <div class="op">0.2</div>
                  <div class="op">0.3</div>
                  <div class="op">0.4</div>
                  <div class="op">0.5</div>
                  <div class="op">0.6</div>
                  <div class="op">0.7</div>
                  <div class="op">0.8</div>
                  <div class="op">0.9</div>
                  <div class="op">1.0</div>
                  <div class="op">1.1</div>
                  <div class="op">1.2</div>
                  <div class="op">1.3</div>
                  <div class="op">1.4</div>
                  <div class="op">1.5</div>
                  <div class="op">1.6</div>
                  <div class="op">1.7</div>
                  <div class="op">1.8</div>
                  <div class="op">1.9</div>
                  <div class="op">2.0</div>
                  <div class="op">2.1</div>
                  <div class="op">2.2</div>
                  <div class="op">2.3</div>
                  <div class="op">2.4</div>
                  <div class="op">2.5</div>
                  <div class="op">2.6</div>
                  <div class="op">2.7</div>
                  <div class="op">2.8</div>
                  <div class="op">2.9</div>
                  <div class="op">3.0</div>
                  <div class="op">3.1</div>
                  <div class="op">3.2</div>
                  <div class="op">3.3</div>
                  <div class="op">3.4</div>
                  <div class="op">3.5</div>
                  <div class="op">3.6</div>
                  <div class="op">3.7</div>
                  <div class="op">3.8</div>
                  <div class="op">3.9</div>
                  <div class="op">4.0</div>
                  <div class="op">4.1</div>
                  <div class="op">4.2</div>
                  <div class="op">4.3</div>
                  <div class="op">4.4</div>
                  <div class="op">4.5</div>
                  <div class="op">4.6</div>
                  <div class="op">4.7</div>
                  <div class="op">4.8</div>
                  <div class="op">4.9</div>
                  <div class="op">5.0</div>
                  <div class="op">5.1</div>
                  <div class="op">5.2</div>
                  <div class="op">5.3</div>
                  <div class="op">5.4</div>
                  <div class="op">5.5</div>
                  <div class="op">5.6</div>
                  <div class="op">5.7</div>
                  <div class="op">5.8</div>
                  <div class="op">5.9</div>
                  <div class="op">6.0</div>
                  <div class="op">6.1</div>
                  <div class="op">6.2</div>
                  <div class="op">6.3</div>
                  <div class="op">6.4</div>
                  <div class="op">6.5</div>
                  <div class="op">6.6</div>
                  <div class="op">6.7</div>
                  <div class="op">6.8</div>
                  <div class="op">6.9</div>
                  <div class="op">7.0</div>
                  <div class="op">7.1</div>
                  <div class="op">7.2</div>
                  <div class="op">7.3</div>
                  <div class="op">7.4</div>
                  <div class="op">7.5</div>
                  <div class="op">7.6</div>
                  <div class="op">7.7</div>
                  <div class="op">7.8</div>
                  <div class="op">7.9</div>
                  <div class="op">8.0</div>
                  <div class="op">8.1</div>
                  <div class="op">8.2</div>
                  <div class="op">8.3</div>
                  <div class="op">8.4</div>
                  <div class="op">8.5</div>
                  <div class="op">8.6</div>
                  <div class="op">8.7</div>
                  <div class="op">8.8</div>
                  <div class="op">8.9</div>
                  <div class="op">9.0</div>
                  <div class="op">9.1</div>
                  <div class="op">9.2</div>
                  <div class="op">9.3</div>
                  <div class="op">9.4</div>
                  <div class="op">9.5</div>
                  <div class="op">9.6</div>
                  <div class="op">9.7</div>
                  <div class="op">9.8</div>
                  <div class="op">9.9</div>
                  <div class="op">10.0</div>
                  <div class="op">10.1</div>
                  <div class="op">10.2</div>
                  <div class="op">10.3</div>
                  <div class="op">10.4</div>
                  <div class="op">10.5</div>
                  <div class="op">10.6</div>
                  <div class="op">10.7</div>
                  <div class="op">10.8</div>
                  <div class="op">10.9</div>
                  <div class="op">11.0</div>
                  <div class="op">11.1</div>
                  <div class="op">11.2</div>
                  <div class="op">11.3</div>
                  <div class="op">11.4</div>
                  <div class="op">11.5</div>
                  <div class="op">11.6</div>
                  <div class="op">11.7</div>
                  <div class="op">11.8</div>
                  <div class="op">11.9</div>
                  <div class="op">12.0</div>
                  <div class="op">12.1</div>
                  <div class="op">12.2</div>
                  <div class="op">12.3</div>
                  <div class="op">12.4</div>
                  <div class="op">12.5</div>
                  <div class="op">12.6</div>
                  <div class="op">12.7</div>
                  <div class="op">12.8</div>
                  <div class="op">12.9</div>
                  <div class="op">13.0</div>
                  <div class="op">13.1</div>
                  <div class="op">13.2</div>
                  <div class="op">13.3</div>
                  <div class="op">13.4</div>
                  <div class="op">13.5</div>
                  <div class="op">13.6</div>
                  <div class="op">13.7</div>
                  <div class="op">13.8</div>
                  <div class="op">13.9</div>
                  <div class="op">14.0</div>
                  <div class="op">14.1</div>
                  <div class="op">14.2</div>
                  <div class="op">14.3</div>
                  <div class="op">14.4</div>
                  <div class="op">14.5</div>
                  <div class="op">14.6</div>
                  <div class="op">14.7</div>
                  <div class="op">14.8</div>
                  <div class="op">14.9</div>
                  <div class="op">15.0</div>
                  <div class="op">15.0</div>
                  <div class="op">15.1</div>
                  <div class="op">15.2</div>
                  <div class="op">15.3</div>
                  <div class="op">15.4</div>
                  <div class="op">15.5</div>
                  <div class="op">15.6</div>
                  <div class="op">15.7</div>
                  <div class="op">15.8</div>
                  <div class="op">15.9</div>
                  <div class="op">16.0</div>
                </div>
              </div>
              <label for="いち"><div class="btn" id="speed1" style="border-width:1px;">+1.0</div></label>
              <label for="てんいち"><div class="btn" id="speed2">+0.1</div></label>
              <label for="ひくてんいち"><div class="btn" id="-speed2">-0.1</div></label>
              <label for="ひくいち"><div class="btn" id="-speed1">-1.0</div></label>
            </div>
            <div style="float:left;border-top-style:solid;border-width:1px;border-top-color:#c0c0c0;margin-left:-1px;">
              <div style="padding-left:14px;width:46.86px;height:25px;">Time</div>
              <label for="ひくご"><div class="btn" id="-time1" style="width:23.93px;padding-left:6px;">↶</div></label>
              <label for="ご"><div class="btn" id="time1" style="width:22.93px;padding-left:7px;">↷</div></label>
            </div>
          </div>
          <label for="play"><svg style="padding-left:68px;"><path d="M1.5,0v20L18.5,10"></path></svg></label>
          <label for="stop"><svg style="padding-left:10px;"><path d="M1.5,0v20h6v-20h5v20h6v-20"></path></svg></label>
          <label for="btn"><svg style="padding-left:42px;"><path id="bg" d="M1.5,1.5v6h2V3.5H7.5V1.5M12.5,1.5h6V7.5h-2V3.5h-4M1.5,12.5v6H7.5v-2H3.5v-4M12.5,16.5h4v-4h2v6h-6"></path></svg></label>
        </div><br>
        <div>
        </div>
      </div>
    再生位置  :<span id="position">-</span><br/>
    再生速度  : <span id="speed">1.0</span><br/>
    ファイル名 :<span id="filename"></span><br/>
    <script>
document.getElementById('sel').scrollTop=225
brt=3;
document.getElementById('sel').addEventListener('scroll',mbrt)
function mbrt(){
  var sp=~~(document.getElementById('sel').scrollTop/25+1.5)/10
  document.getElementById("video").playbackRate=(sp==16.1)?16:sp;
  document.getElementById("speed").innerHTML=(sp==16.1)?'16.0':sp.toFixed(1);
  function do1(){
    setTimeout(()=>{brt-=0.01;if(+brt.toFixed(1)){do1()}else{var sel=document.getElementById('sel');var sc=sel.scrollTop;sel.scrollTop=~~(sc/25+.5)*25;brt=3}},10)
  }
  if(brt==3){do1();}
  brt=2.99
}
    function loop(){
      var v = document.getElementById("video");
      var lp=document.getElementById('lp');
      if(lp.innerHTML=='loop:off'){
        lp.innerHTML="loop:on";
        v.loop=true;
      }else{
        lp.innerHTML="loop:off";
        v.loop=false;
      }
    }
    function bORg(){
      var btn = document.getElementById('btn');
      var v = document.getElementById("video");
      var bg = document.getElementById('bg');
      if(btn.value=="全画面"){document.body.requestFullscreen();btn.value="全画面終了";v.style.position="fixed";v.style.height="100%";bg.setAttribute('d','M5.5,5.5v-4h2v6h-6v-2zM14.5,5.5v-4h-2v6h6v-2M5.5,14.5v4h2v-6h-6v2M14.5,14.5v4h-2v-6h6v2')}else{document.exitFullscreen();btn.value="全画面";v.style.position="static";v.style.height="480px";bg.setAttribute('d','M1.5,1.5v6h2V3.5H7.5V1.5M12.5,1.5h6V7.5h-2V3.5h-4M1.5,12.5v6H7.5v-2H3.5v-4M12.5,16.5h4v-4h2v6h-6')}
    }
    var h=0;
    function vtime(t){
      var v = document.getElementById("video");
      if  ( v == null || v.src == null ) return;
      v.currentTime += t;
    }
    function init(){
        var f = document.getElementById("filename");
        f.addEventListener( "change", function (event) {
            var URL = URL || webkitURL;
            var file = event.target.files[0];
            document.querySelector('video').src = URL.createObjectURL(file);
            document.getElementById('filename').innerHTML = document.querySelector('video').src;
        }, false );
        var v = document.getElementById("video");
        v.addEventListener("timeupdate", function(){
            document.getElementById("position").innerHTML = v.currentTime.toFixed(2);
            document.getElementById("speed").innerHTML = v.playbackRate.toFixed(1);
        }, false);
    }
    function play() {
        var v = document.getElementById("video");
        if  ( v == null || v.src == null ) return;
        v.play();
    }
    function pause() {
        var v = document.getElementById("video");
        if  ( v == null || v.src == null ) return;
        v.pause();
    }
    function changeSpeed( val ) {
        var v = document.getElementById("video");
        if  ( v == null || v.src == null ) return;
        if ( v.playbackRate + val < 0.1 ) {v.playbackRate = 0.1;} else if ( v.playbackRate + val > 16 ) {v.playbackRate = 16;} else { v.playbackRate += val; }
        document.getElementById("sel").scrollTop=(v.playbackRate)*250-25
    }
    init();
var x=0;
var clickp
var mt=0
var ml=0
document.getElementById('a').addEventListener('mousedown',drag)
addEventListener('mouseup',()=>{x=0})
addEventListener('mousemove',(e)=>{mt=e.clientY;ml=e.clientX})
function drag(e){
  x=1
  clt=document.getElementById('box').style.top.split('px').join('')-e.clientY;
  cll=document.getElementById('box').style.left.split('px').join('')-e.clientX;
  function r(){
    setTimeout((e)=>{
      document.getElementById('box').style.top=+mt+clt+'px';
      document.getElementById('box').style.left=+ml+cll+'px';
      if(x){r()}
    },10,e)
  }
  r();
}
    </script>
  </body>
</html>
